# AI Office - 동료들

한동노무법인의 AI 팀원들이 바탕화면에 상주하며 업무를 지원하는 macOS 데스크톱 앱

![Electron](https://img.shields.io/badge/Electron-34-191970?style=flat&logo=electron&logoColor=white)
![Claude](https://img.shields.io/badge/Claude_API-Sonnet_4.5-orange)
![Platform](https://img.shields.io/badge/Platform-macOS-lightgrey?logo=apple)

---

## 목차

1. [개요](#개요)
2. [AI 캐릭터 소개](#ai-캐릭터-소개)
3. [설치 방법](#설치-방법)
4. [실행 방법](#실행-방법)
5. [사용 방법](#사용-방법)
6. [설정](#설정)
7. [단축키](#단축키)
8. [프로젝트 구조](#프로젝트-구조)
9. [아이콘 생성](#아이콘-생성)
10. [문제 해결](#문제-해결)

---

## 개요

**AI Office(동료들)** 는 Electron 기반의 macOS 데스크톱 앱입니다.
화면 하단에 5명의 AI 팀원이 항상 떠 있으며, 클릭하면 1:1 채팅이 가능합니다.
회의실 기능으로 여러 캐릭터가 동시에 토론에 참여할 수도 있습니다.

### 주요 기능

- **하단 위젯** - 바탕화면 하단에 5명의 캐릭터가 항상 표시
- **1:1 채팅** - 각 캐릭터를 클릭해서 전문 분야별 상담
- **회의실** - 전체 캐릭터 토론 (키워드 기반 자동 응답자 선정)
- **파일 첨부** - 이미지, 문서, 텍스트 메모 첨부 가능
- **듀얼 모드** - Claude API 직접 호출 또는 Clawdbot Gateway 연결
- **시스템 트레이** - 트레이 아이콘으로 빠른 접근

---

## AI 캐릭터 소개

| 이름 | 역할 | 전문 분야 | 말투 | 상태색 |
|------|------|----------|------|--------|
| 김 변호사 | 법률 자문 | 노동법 소송, 부당해고 구제, 노동위원회 | 존댓말 | 남색 |
| 박 노무사 | 인사노무 컨설팅 | 취업규칙, 인사제도, 근로계약서 | 해요체 | 보라 |
| 오 지도사 | 산업안전 | 산안법, 중대재해법, 위험성평가 | 합쇼체 | 주황 |
| 이 디자이너 | 브랜드 디자인 | PPT, SNS, 마케팅 콘텐츠 | 반말(MZ) | 빨강 |
| 정 세무사 | 세무/회계 | 4대보험, 급여정산, 퇴직금 | 존댓말 | 초록 |

각 캐릭터는 고유한 성격과 전문성을 가지고 있으며, 상태를 변경할 수 있습니다:
- 🟢 **업무중** - 메시지 응답 가능
- 🟡 **휴식중** - 메시지 응답 가능
- 🔴 **휴가** - 메시지 응답 불가

---

## 설치 방법

### 사전 요구사항

- **Node.js** 18 이상
- **npm** 9 이상
- **macOS** 11 (Big Sur) 이상

### 1단계: 의존성 설치

```bash
cd Friends-main
npm install
```

### 2단계: 앱 빌드 (macOS .app 생성)

```bash
npm run build
```

빌드 완료 후 `dist/mac-arm64/AI Office.app` 파일이 생성됩니다.

### 3단계: 바탕화면 또는 Applications에 배치

```bash
# Applications 폴더에 복사 (권장)
cp -r dist/mac-arm64/"AI Office.app" /Applications/

# 또는 바탕화면에 복사
cp -r dist/mac-arm64/"AI Office.app" ~/Desktop/
```

복사하면 바탕화면/Applications에서 AI Office 아이콘(보라색 빌딩 아이콘)이 표시됩니다.
더블클릭으로 바로 실행할 수 있습니다.

> **참고:** 처음 실행 시 "확인되지 않은 개발자" 경고가 나올 수 있습니다.
> `시스템 설정 > 개인정보 보호 및 보안`에서 "확인 없이 열기"를 클릭하세요.

---

## 실행 방법

### 개발 모드 (소스에서 직접 실행)

```bash
npm start
```

또는 개발자 도구 포함:

```bash
npm run dev
```

### 빌드된 앱 실행

`dist/mac-arm64/AI Office.app`을 더블클릭하거나:

```bash
open dist/mac-arm64/"AI Office.app"
```

---

## 사용 방법

### 1. 최초 설정 - API 키 입력

앱을 처음 실행하면 하단에 5명의 캐릭터 위젯이 나타납니다.

1. 시스템 트레이(메뉴바)의 AI Office 아이콘을 클릭
2. **⚙️ 설정** 선택
3. **API 모드** 탭에서 Anthropic API 키 입력
4. **저장** 클릭

또는 환경변수로 설정:

```bash
export ANTHROPIC_API_KEY="sk-ant-..."
npm start
```

### 2. 1:1 채팅

1. 하단 위젯에서 대화하고 싶은 캐릭터를 **클릭**
2. 대시보드 창이 열리며 **채팅** 탭이 활성화
3. 하단 입력창에 메시지를 입력하고 **전송**
4. AI 캐릭터가 전문 분야에 맞춰 응답

**팁:**
- 상단 탭에서 **페르소나** 탭으로 전환하면 캐릭터의 성격/전문분야 확인
- **능력/스킬** 탭에서 각 캐릭터의 능력치와 스킬 태그 확인

### 3. 파일 첨부

채팅 중 파일을 첨부할 수 있습니다:

1. 채팅 입력창 옆 **📎** 버튼 클릭
2. 첨부 유형 선택:
   - **이미지** (JPEG, PNG, GIF, WebP)
   - **문서** (PDF, DOC, TXT 등)
   - **텍스트 메모** (직접 입력)
3. 파일 선택 후 미리보기 확인
4. 메시지와 함께 전송

### 4. 회의실 (전체 토론)

여러 캐릭터에게 동시에 질문하고 싶을 때:

1. 트레이 메뉴에서 **🏢 회의실** 선택 (또는 위젯에서 회의실 버튼)
2. 회의실 창이 열림
3. 메시지를 입력하면 **키워드 기반으로 관련 캐릭터가 자동 선정**되어 순차 응답

**키워드 자동 매핑:**

| 입력 키워드 | 응답 캐릭터 |
|------------|------------|
| 법, 소송, 해고, 구제 | 김 변호사 |
| 인사, 취업규칙, 근로계약 | 박 노무사 |
| 안전, 산재, 중대재해 | 오 지도사 |
| 디자인, 마케팅, SNS, PPT | 이 디자이너 |
| 세금, 4대보험, 급여, 퇴직금 | 정 세무사 |

**회의실 설정:**
- **회의 규칙** - 자유 텍스트로 AI에게 지침 전달 (예: "간결하게 답변해줘")
- **최대 응답자** - 1~5명 (기본 3명)
- **자동 선택** - ON/OFF (키워드 기반 자동 선택)
- **응답 순서** - 드래그로 우선순위 변경

### 5. 캐릭터 상태 변경

각 캐릭터의 상태를 변경할 수 있습니다:

1. 대시보드에서 캐릭터 선택
2. 상태 아이콘 클릭
3. 업무중(🟢) / 휴식중(🟡) / 휴가(🔴) 선택

> 휴가 상태의 캐릭터는 메시지에 응답하지 않으며, 회의실에서도 제외됩니다.

### 6. 앱 숨기기/보이기

- **단축키** `Cmd+Shift+H` 로 앱 전체 숨기기/보이기 토글
- 숨긴 상태에서 화면 우측 하단에 **👥** 복원 버튼이 나타남
- 트레이 메뉴에서도 숨기기/보이기 가능

---

## 설정

### API 모드 (기본)

Claude API를 직접 호출하는 모드입니다.

- **모델:** `claude-sonnet-4-5-20250929`
- **필요:** Anthropic API 키
- 설정 > API 모드에서 키 입력

### Clawdbot 모드

Clawdbot Gateway를 통해 연결하는 모드입니다.
캐릭터별로 개별 Gateway를 설정할 수 있습니다.

- **Gateway URL** - 예: `http://localhost:3001`
- **인증 토큰** - 선택사항
- **세션 키** - 기본: `employee-{캐릭터id}`

설정 방법:
1. ⚙️ 설정 열기
2. 연결 모드를 "Clawdbot"으로 변경
3. 각 캐릭터별 Gateway URL 입력
4. "연결 테스트" 버튼으로 확인
5. 저장

### 설정 파일 위치

설정은 자동으로 저장됩니다:
```
~/Library/Application Support/ai-office/config.json
```

---

## 단축키

| 단축키 | 기능 |
|--------|------|
| `Cmd+Shift+H` | 앱 전체 숨기기/보이기 |
| 트레이 클릭 | 앱 토글 |

---

## 프로젝트 구조

```
Friends-main/
├── main.js              # Electron 메인 프로세스
├── preload.js           # IPC 브릿지 (contextBridge)
├── package.json         # 의존성 및 빌드 설정
├── generate-icon.py     # 앱 아이콘 생성 스크립트
├── SPEC.md              # 상세 기능 명세서
├── build/
│   ├── icon.png         # 1024x1024 원본 아이콘
│   ├── icon.icns        # macOS 앱 아이콘
│   └── icon.iconset/    # 다양한 크기의 아이콘 세트
├── renderer/
│   ├── widget.html      # 하단 캐릭터 위젯
│   ├── dashboard.html   # 대시보드 (채팅/페르소나/스킬)
│   ├── meeting.html     # 회의실
│   ├── settings.html    # 설정
│   ├── characters.js    # 캐릭터 SVG 아바타
│   ├── index.html       # (레거시)
│   ├── app.js           # (레거시)
│   └── style.css        # (레거시)
└── dist/                # 빌드 출력 (git 제외)
    └── mac-arm64/
        └── AI Office.app
```

---

## 아이콘 생성

앱 아이콘을 수정하려면:

### 사전 요구사항

```bash
pip install Pillow
```

### 아이콘 재생성

```bash
python3 generate-icon.py
```

이 스크립트는 다음을 생성합니다:
- `build/icon.png` - 1024x1024 원본
- `build/icon.iconset/` - 16px~1024px 다양한 크기

### .icns 파일 생성

```bash
iconutil -c icns build/icon.iconset
```

이후 `npm run build`로 앱을 다시 빌드하면 새 아이콘이 반영됩니다.

---

## 문제 해결

### "확인되지 않은 개발자" 경고

앱을 처음 실행할 때 macOS Gatekeeper 경고가 나타날 수 있습니다.

**해결 방법:**
1. `시스템 설정` > `개인정보 보호 및 보안` 이동
2. 하단에 "AI Office" 관련 메시지 확인
3. "확인 없이 열기" 클릭

또는 터미널에서:
```bash
xattr -cr /Applications/"AI Office.app"
```

### API 키 오류

- 설정에서 API 키가 올바르게 입력되었는지 확인
- `sk-ant-`로 시작하는 유효한 Anthropic API 키인지 확인
- 환경변수 `ANTHROPIC_API_KEY`가 설정되어 있는지 확인

### 위젯이 보이지 않을 때

1. 트레이 아이콘(메뉴바)에서 "위젯 보기" 클릭
2. `Cmd+Shift+H`로 앱이 숨겨진 상태인지 확인
3. 앱을 재시작

### Clawdbot 연결 실패

1. Gateway 서버가 실행 중인지 확인
2. URL이 올바른지 확인 (예: `http://localhost:3001`)
3. 설정에서 "연결 테스트" 버튼으로 확인
4. 방화벽이 해당 포트를 허용하는지 확인

---

## 라이선스

Private - 한동노무법인 내부용

---

Made with Claude AI by 강철중
